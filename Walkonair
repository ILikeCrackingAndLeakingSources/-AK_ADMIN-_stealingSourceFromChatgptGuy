-- Services and variables
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- Create the main invisible baseplate
local baseplate = Instance.new("Part")
baseplate.Name = "InvisibleBaseplate"
baseplate.Size = Vector3.new(2048, 1, 2048)
baseplate.Position = Vector3.new(0, 0, 0)
baseplate.Transparency = 1
baseplate.Anchored = true
baseplate.CanCollide = true
baseplate.Parent = workspace

-- Create a ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AirwalkGui"
screenGui.Parent = PlayerGui

-- Function to create buttons
local function createButton(parent, text, position, size, shape, initialColor, textColor)
    local button = Instance.new("TextButton")
    button.Size = size
    button.Position = position
    button.Text = text
    button.BackgroundColor3 = initialColor
    button.TextColor3 = textColor
    button.Font = Enum.Font.GothamBold
    button.TextSize = 18
    button.BorderSizePixel = 0
    button.Parent = parent

    -- Rounded corners or circular shape
    local corner = Instance.new("UICorner")
    if shape == "circle" then
        corner.CornerRadius = UDim.new(1, 0) -- Full circle
    else
        corner.CornerRadius = UDim.new(0, 12) -- Rounded corners
    end
    corner.Parent = button

    return button
end

-- Create buttons
local toggleButton = createButton(screenGui, "On", UDim2.new(1, -65, 0.08, 0), UDim2.new(0, 40, 0, 40), "circle", Color3.fromRGB(0, 255, 0), Color3.fromRGB(255, 255, 255))
local upButton = createButton(screenGui, "▲", UDim2.new(1, -90, 0.15, 0), UDim2.new(0, 40, 0, 40), "circle", Color3.fromRGB(100, 100, 100), Color3.fromRGB(255, 255, 255))
local downButton = createButton(screenGui, "▼", UDim2.new(1, -40, 0.15, 0), UDim2.new(0, 40, 0, 40), "circle", Color3.fromRGB(100, 100, 100), Color3.fromRGB(255, 255, 255))

local airwalking = true -- Start with airwalking on

-- Function to maintain player height
local function maintainPlayerHeight()
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

    while true do
        wait(0.1)
        if humanoidRootPart and airwalking then
            local playerPosition = humanoidRootPart.Position
            local minX = baseplate.Position.X - baseplate.Size.X / 2
            local maxX = baseplate.Position.X + baseplate.Size.X / 2
            local minZ = baseplate.Position.Z - baseplate.Size.Z / 2
            local maxZ = baseplate.Position.Z + baseplate.Size.Z / 2
            if playerPosition.X < minX or playerPosition.X > maxX or playerPosition.Z < minZ or playerPosition.Z > maxZ then
                humanoidRootPart.Position = Vector3.new(playerPosition.X, playerPosition.Y, playerPosition.Z)
            end
        end
    end
end

-- Function to toggle airwalk state
local function toggleAirwalk()
    if airwalking then
        toggleButton.Text = "Off"
        toggleButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0) -- Red
        baseplate:Destroy()
        airwalking = false
    else
        toggleButton.Text = "On"
        toggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0) -- Green
        if not baseplate:IsDescendantOf(workspace) then
            baseplate = Instance.new("Part")
            baseplate.Name = "InvisibleBaseplate"
            baseplate.Size = Vector3.new(2048, 1, 2048)
            baseplate.Position = Vector3.new(0, 0, 0)
            baseplate.Transparency = 1
            baseplate.Anchored = true
            baseplate.CanCollide = true
            baseplate.Parent = workspace
        end
        airwalking = true
    end
end

-- Function to move the baseplate up
local function moveBaseplateUp()
    baseplate.Position = baseplate.Position + Vector3.new(0, 0.5, 0)
end

-- Function to move the baseplate down
local function moveBaseplateDown()
    baseplate.Position = baseplate.Position - Vector3.new(0, 0.5, 0)
end

-- Connect button click events
toggleButton.MouseButton1Click:Connect(toggleAirwalk)
upButton.MouseButton1Click:Connect(moveBaseplateUp)
downButton.MouseButton1Click:Connect(moveBaseplateDown)

-- Start maintaining player height
maintainPlayerHeight()
