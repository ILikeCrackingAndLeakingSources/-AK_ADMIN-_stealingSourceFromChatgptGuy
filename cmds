-- Lokaler Spieler
local player = game.Players.LocalPlayer

-- ScreenGui erstellen
local screenGui = Instance.new("ScreenGui")
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Haupt-Frame (Top-left position)
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0.3, 0, 0.5, 0) -- Reduced size (30% width, 50% height)
frame.Position = UDim2.new(0, 0, 0, 0) -- Position in the top-left corner
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.BackgroundTransparency = 0.2 -- 80% Transparenz
frame.BorderSizePixel = 0
frame.Parent = screenGui

-- Rundungen für Frame
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

-- Leichter Schatteneffekt
local uiStroke = Instance.new("UIStroke")
uiStroke.Color = Color3.fromRGB(50, 50, 50)
uiStroke.Thickness = 1
uiStroke.Parent = frame

-- Eingabefeld (Suchleiste) (Smaller size)
local searchBox = Instance.new("TextBox")
searchBox.Size = UDim2.new(1, -10, 0, 25) -- Reduced height
searchBox.Position = UDim2.new(0, 5, 0, 5)
searchBox.PlaceholderText = "Search Commands..."
searchBox.Text = ""
searchBox.TextColor3 = Color3.fromRGB(255, 255, 255)
searchBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
searchBox.BorderSizePixel = 0
searchBox.ClearTextOnFocus = false
searchBox.Parent = frame

-- Runde Ecken für Suchleiste
local searchBoxCorner = Instance.new("UICorner")
searchBoxCorner.CornerRadius = UDim.new(0, 5)
searchBoxCorner.Parent = searchBox

-- Leichter leuchtender Rand bei Auswahl
local searchBoxStroke = Instance.new("UIStroke")
searchBoxStroke.Color = Color3.fromRGB(70, 130, 180) -- Stahlblau
searchBoxStroke.Thickness = 0
searchBoxStroke.Parent = searchBox

searchBox.Focused:Connect(function()
    searchBoxStroke.Thickness = 2
end)

searchBox.FocusLost:Connect(function()
    searchBoxStroke.Thickness = 0
end)

-- ScrollFrame für Befehle (Smaller size)
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, -10, 1, -70) -- Reduced height
scrollFrame.Position = UDim2.new(0, 5, 0, 35)
scrollFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
scrollFrame.BackgroundTransparency = 0.1
scrollFrame.BorderSizePixel = 0
scrollFrame.ScrollBarThickness = 8
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0) -- Wird später angepasst
scrollFrame.Parent = frame

-- Runde Ecken für ScrollFrame
local scrollFrameCorner = Instance.new("UICorner")
scrollFrameCorner.CornerRadius = UDim.new(0, 5)
scrollFrameCorner.Parent = scrollFrame

-- Layout für die Befehlsliste
local uiListLayout = Instance.new("UIListLayout")
uiListLayout.Parent = scrollFrame
uiListLayout.Padding = UDim.new(0, 5)
uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- Beschreibungstextfeld unterhalb der Befehle (Smaller size)
local descriptionBox = Instance.new("TextLabel")
descriptionBox.Size = UDim2.new(1, -10, 0, 25) -- Reduced height
descriptionBox.Position = UDim2.new(0, 5, 1, -30)
descriptionBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
descriptionBox.BackgroundTransparency = 0.2
descriptionBox.TextColor3 = Color3.fromRGB(255, 255, 255)
descriptionBox.TextWrapped = true
descriptionBox.TextSize = 14
descriptionBox.Text = ""
descriptionBox.Visible = false
descriptionBox.BorderSizePixel = 0
descriptionBox.Parent = frame

-- Runde Ecken für descriptionBox
local descriptionBoxCorner = Instance.new("UICorner")
descriptionBoxCorner.CornerRadius = UDim.new(0, 5)
descriptionBoxCorner.Parent = descriptionBox

-- Schließen- und Minimieren-Button (Smaller size)
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 20, 0, 20) -- Reduced size
closeButton.Position = UDim2.new(1, -30, 0, 5)
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
closeButton.BorderSizePixel = 0
closeButton.Parent = frame

local minimizeButton = Instance.new("TextButton")
minimizeButton.Size = UDim2.new(0, 20, 0, 20) -- Reduced size
minimizeButton.Position = UDim2.new(1, -60, 0, 5)
minimizeButton.Text = "_"
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
minimizeButton.BorderSizePixel = 0
minimizeButton.Parent = frame

-- OpenButton für das erneute Öffnen
local openButton = Instance.new("TextButton")
openButton.Size = UDim2.new(0, 80, 0, 25) -- Reduced size
openButton.Position = UDim2.new(0.5, -40, 1, -40)
openButton.Text = "Open CMDS"
openButton.TextColor3 = Color3.fromRGB(255, 255, 255)
openButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
openButton.BorderSizePixel = 0
openButton.Visible = false
openButton.Parent = screenGui

-- Runde Ecken für openButton
local openButtonCorner = Instance.new("UICorner")
openButtonCorner.CornerRadius = UDim.new(0, 5)
openButtonCorner.Parent = openButton

-- Draggable functionality
local dragging = false
local dragInput, startPos, frameStartPos

-- Function to update frame position
local function updateFramePosition(input)
    local delta = input.Position - dragInput
    frame.Position = UDim2.new(frameStartPos.X.Scale, frameStartPos.X.Offset + delta.X, frameStartPos.Y.Scale, frameStartPos.Y.Offset + delta.Y)
end

frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragInput = input.Position
        frameStartPos = frame.Position

        -- Connect to the InputChanged event to update the position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        updateFramePosition(input)
    end
end)

-- Minimieren/Maximieren-Funktion
local minimized = false

minimizeButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        -- Slide-Out Animation
        frame:TweenSize(UDim2.new(frame.Size.X.Scale, frame.Size.X.Offset, 0, 30), Enum.EasingDirection.Out, Enum.EasingStyle.Quint, 0.5, true)
        scrollFrame.Visible = false
        descriptionBox.Visible = false
    else
        -- Slide-In Animation
        frame:TweenSize(UDim2.new(frame.Size.X.Scale, frame.Size.X.Offset, 0.5, 0), Enum.EasingDirection.Out, Enum.EasingStyle.Quint, 0.5, true)
        wait(0.5)
        scrollFrame.Visible = true
        descriptionBox.Visible = true
    end
end)

-- Schließen/Öffnen-Funktion
closeButton.MouseButton1Click:Connect(function()
    -- Slide-Out Animation
    frame:TweenPosition(UDim2.new(frame.Position.X.Scale, frame.Position.X.Offset, -1, 0), Enum.EasingDirection.In, Enum.EasingStyle.Quint, 0.5, true)
    wait(0.5)
    frame.Visible = false
    openButton.Visible = true
end)

openButton.MouseButton1Click:Connect(function()
    frame.Visible = true
    -- Slide-In Animation
    frame.Position = UDim2.new(0, 0, 0, 0) -- Ensure position is reset to top-left
    frame:TweenPosition(UDim2.new(0, 0, 0, 0), Enum.EasingDirection.Out, Enum.EasingStyle.Quint, 0.5, true)
    openButton.Visible = false
end)

-- Befehle definieren
local commands = {
{".bring", "Executes a bring GUI that brings the players by floating under them."},
{".antilag", "Prevents lagging."},
{".antibang", "Prevents other exploiters from banging you."},
{".chaoshub", "Just a random hub."},
{".aimbot", "The command already explains."},
{".protonadmin", "Just another Admin script."},
{".triviabooth", "(Patched)"},
{".walkonwalls", "Rewrites gravity and lets you walk on any surface."},
{".unanchorfling", "Go near unanchored parts and fling the target with it."},
{".chatquiz", "Allows you to chat quizzes with other players."},
{".invis", "Invisibility toggle."},
{".f3x sun", "The same game as .f3x."},
{".f3x triangle", "The same game as .f3x."},
{".f3x house", "The same game as .f3x."},
{".f3x ufo", "The same game as .f3x."},
{".shiftlock", "Shiftlock for mobile."},
{".nofriends", "Automatically server hops if a friend joins."},
{".getoutmyinv", "Drops all your items at once."},
{".platespin", "Orange plates spin around you. Click on the plates for it to work."},
{".kronefling", "Loop flings everyone."},
{".gimmetools", "Picks up every tool dropped by a player in the server."},
{".givepower (display name)", "Gives the player you wish warning power."},
{".oof", "Respawns you and teleports you back to the same position."},
{".cmds", "The GUI for this script."},
{".antilog", "Prevents the game from logging your chat and screenshots."},
{".donttouchme", "Flings everyone that touches you."},
{".serverhop", "Hops servers."},
{".afk", "Prevents being kicked while AFK."},
{".ftao", "For the game (Fling Things and Others)."},
{".iy", "Infinite yield admin."},
{".emoji", "Enables chatting emojis like Discord (:skull)."},
{".f3x", "For (Sword Fights on the Heights Original). Controls orange plates."},
{".bypasser", "Bypasses the chat filter."},
{".bladeball", "A bladeball script."},
{".nonofling", "Prevents other players from flinging you."},
{".swordreach", "Explains itself."},
{".byebye all", "Flings everyone once."},
{".pltiger", "A script for Prison Life."},
{".fps", "Boosts FPS."},
{".rejoin", "Rejoin the game."},
{".warn all", "Warns all players in Mic Up."},
{".clearchat", "Clears the chat."},
{".cmdbar", "A command bar for executing commands without using chat."},
{".jobidjoiner", "Join a player by entering game ID and job ID."},
{".walkonvoid", "Prevents you from dying by falling into the void."},
{".hkill all", "Kills everyone with a sword that does damage."},
{".chainedpower", "Activates the commands for the game (Chained 2 players Obby)"},
{".nuke", "For the game (Chained 2 players Obby)."},
{".bunnyhop all", "For the game (Chained 2 players Obby)."},
{".no jumping", "For the game (Chained 2 players Obby)."},
{".jail all", "For the game (Chained 2 players Obby)."},
{".spawn fog", "For the game (Chained 2 players Obby)."},
{".low gravity", "For the game (Chained 2 players Obby)."},
{".spam on", "For the game (Chained 2 players Obby)."},
{".serverhopmost", "Server hops to the server with the most players."},
{".antiheadsit", "Self-explained."},
{".antivoid", "Deletes the void."},
{".dropkick", "Performs a dropkick on nearby players."},
{".usercreationcracked", "Cracked bypasser."},
{".serverhoplow", "Server hops to a low-populated server."},
{".walkonair", "Adds an invisible baseplate."},
{".copy (display name)", "Copy the avatar of the target (MIC UP)."},
{".copy all", "Spam changes to every avatar in the server (MIC UP)."},
{".uncopy", "Stops the spamming."},
{".chatbot", "Join Discord, claim points, and enter the key."},
{".rainbowmic", "Gets the rainbow mic from the vending machine."},
{".rainbowdonut", "Gets the rainbow donut from the vending machine."},
{".demonmic", "Gets the demon mic from the vending machine."},
{".tptoplr", "TP to player tool."},
{".stopglide", "Removes sliding when walking fast."},
{".lookat", "Look at player of choice."},
{".unlookat", "Stops looking."},
{".goto", "Teleport to player of choice."},
{".superfly", "Become Superman (better on R15)."},
{".remotechecker", "Fire any remote with a GUI."},
{".animhub", "Use any animation and troll."},
{".copynearest", "Copies nearest in Mic Up."},
{".sneak", "Go up and down."}
}

-- Update commands in the UI
local function updateCommands()
    for _, cmd in ipairs(commands) do
        local commandButton = Instance.new("TextButton")
        commandButton.Size = UDim2.new(1, -10, 0, 30) -- Reduced height
        commandButton.Name = cmd[1] -- Use the command as the name
        commandButton.Text = cmd[1]
        commandButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        commandButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        commandButton.BorderSizePixel = 0
        commandButton.Parent = scrollFrame

        local commandCorner = Instance.new("UICorner")
        commandCorner.CornerRadius = UDim.new(0, 5)
        commandCorner.Parent = commandButton

        commandButton.MouseButton1Click:Connect(function()
            descriptionBox.Text = cmd[2] -- Get the description
            descriptionBox.Visible = true
        end)
    end
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, #commands * 35) -- Adjusts the canvas size based on the number of commands
end

-- Initialize commands
updateCommands()
