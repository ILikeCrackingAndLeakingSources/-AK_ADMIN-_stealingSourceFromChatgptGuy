-- Get the local player
local player = game.Players.LocalPlayer

-- Create a ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Main Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0.4, 0, 0.3, 0)
frame.Position = UDim2.new(0.3, 0, 0.2, 0)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.BackgroundTransparency = 0.2
frame.BorderSizePixel = 0
frame.Parent = screenGui

-- Rounded corners for the Main Frame
local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 10)
frameCorner.Parent = frame

-- Title
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0, 30)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.Text = "AK ADMIN CMDS"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
titleLabel.TextScaled = true
titleLabel.Parent = frame

-- Rounded corners for the Title
local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 5)
titleCorner.Parent = titleLabel

-- Dragging Functionality
local dragging = false
local dragInput, dragStart, startPos

local function updateInput(input)
	if dragging then
		local delta = input.Position - dragStart
		frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end

titleLabel.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = frame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

titleLabel.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		updateInput(input)
	end
end)

-- Search Box
local searchBox = Instance.new("TextBox")
searchBox.Size = UDim2.new(1, -10, 0, 40)
searchBox.Position = UDim2.new(0, 5, 0, 35)
searchBox.PlaceholderText = "Search command..."
searchBox.Text = ""
searchBox.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
searchBox.TextColor3 = Color3.fromRGB(255, 255, 255)
searchBox.ClearTextOnFocus = false
searchBox.Parent = frame

-- Rounded corners for the Search Box
local searchBoxCorner = Instance.new("UICorner")
searchBoxCorner.CornerRadius = UDim.new(0, 5)
searchBoxCorner.Parent = searchBox

-- ScrollFrame for commands
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, -10, 0.4, -10)
scrollFrame.Position = UDim2.new(0, 5, 0, 80)
scrollFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
scrollFrame.ScrollBarThickness = 8
scrollFrame.BorderSizePixel = 0
scrollFrame.Parent = frame

-- Rounded corners for the ScrollFrame
local scrollFrameCorner = Instance.new("UICorner")
scrollFrameCorner.CornerRadius = UDim.new(0, 5)
scrollFrameCorner.Parent = scrollFrame

-- Layout for the ScrollFrame
local uiListLayout = Instance.new("UIListLayout")
uiListLayout.Parent = scrollFrame
uiListLayout.Padding = UDim.new(0, 5)
uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- Automatically adjust CanvasSize based on content
uiListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	scrollFrame.CanvasSize = UDim2.new(0, 0, 0, uiListLayout.AbsoluteContentSize.Y + 10)
end)

-- Description Tooltip
local descriptionBox = Instance.new("TextLabel")
descriptionBox.Size = UDim2.new(1, -10, 0, 30)
descriptionBox.Position = UDim2.new(0, 5, 1, -35)
descriptionBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
descriptionBox.BackgroundTransparency = 0.7
descriptionBox.TextColor3 = Color3.fromRGB(255, 255, 255)
descriptionBox.TextWrapped = true
descriptionBox.TextSize = 14
descriptionBox.Text = ""
descriptionBox.Visible = false
descriptionBox.Parent = frame

-- Rounded corners for the Description Box
local descriptionBoxCorner = Instance.new("UICorner")
descriptionBoxCorner.CornerRadius = UDim.new(0, 5)
descriptionBoxCorner.Parent = descriptionBox

-- Close and Minimize Buttons
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -35, 0, 5)
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
closeButton.BorderSizePixel = 0
closeButton.Parent = frame

local minimizeButton = Instance.new("TextButton")
minimizeButton.Size = UDim2.new(0, 30, 0, 30)
minimizeButton.Position = UDim2.new(1, -70, 0, 5)
minimizeButton.Text = "-"
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
minimizeButton.BorderSizePixel = 0
minimizeButton.Parent = frame

-- Rounded corners for the Buttons
local closeButtonCorner = Instance.new("UICorner")
closeButtonCorner.CornerRadius = UDim.new(0, 5)
closeButtonCorner.Parent = closeButton

local minimizeButtonCorner = Instance.new("UICorner")
minimizeButtonCorner.CornerRadius = UDim.new(0, 5)
minimizeButtonCorner.Parent = minimizeButton

-- Button to reopen the Frame
local openButton = Instance.new("TextButton")
openButton.Size = UDim2.new(0, 50, 0, 30)
openButton.Position = UDim2.new(0, 10, 1, -40)
openButton.Text = "Open"
openButton.TextColor3 = Color3.fromRGB(255, 255, 255)
openButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
openButton.BorderSizePixel = 0
openButton.Visible = false
openButton.Parent = screenGui

-- Rounded corners for the Open Button
local openButtonCorner = Instance.new("UICorner")
openButtonCorner.CornerRadius = UDim.new(0, 5)
openButtonCorner.Parent = openButton

-- Minimize/Maximize Function
local minimized = false

minimizeButton.MouseButton1Click:Connect(function()
	minimized = not minimized
	if minimized then
		scrollFrame.Visible = false
		searchBox.Visible = false
		descriptionBox.Visible = false
		frame.Size = UDim2.new(0.4, 0, 0, 40)
	else
		scrollFrame.Visible = true
		searchBox.Visible = true
		frame.Size = UDim2.new(0.4, 0, 0.3, 0)
	end
end)

-- Close/Open Function
closeButton.MouseButton1Click:Connect(function()
	frame.Visible = false
	openButton.Visible = true
end)

openButton.MouseButton1Click:Connect(function()
	frame.Visible = true
	openButton.Visible = false
end)

-- Filter Function for the Command List
local function filterCommands()
	local searchText = searchBox.Text:lower()
	for _, button in ipairs(scrollFrame:GetChildren()) do
		if button:IsA("TextButton") then
			local cmdText = button.Text:lower()
			button.Visible = cmdText:find(searchText) ~= nil
		end
	end
end

searchBox:GetPropertyChangedSignal("Text"):Connect(filterCommands)

-- Commands
local commands = {
    {"/bring", "Executes a bring GUI that brings the players by floating under them."},
    {"/antilag", "Prevents lagging."},
    {"/antibang", "Prevents other exploiters from banging you."},
    {"/chaoshub", "Just a random hub."},
    {"/aimbot", "The command already explains."},
    {"/protonadmin", "Just another Admin script."},
    {"/triviabooth", "(Patched)"},
    {"/walkonwalls", "Rewrites gravity and lets you walk on any surface."},
    {"/MCfling", "Touch the unanchored ball at the corner of the map. Touch players and fling!"},
    {"/chatquiz", "Allows you to chat quizzes with other players."},
    {"/invis", "Invisibility toggle."},
    {"/f3x sun", "The same game as /f3x."},
    {"/f3x triangle", "The same game as /f3x."},
    {"/f3x house", "The same game as /f3x."},
    {"/f3x ufo", "The same game as /f3x."},
    {"/shiftlock", "Shiftlock for mobile."},
    {"/nofriends", "Automatically server hops if a friend joins."},
    {"/getoutmyinv", "Drops all your items at once."},
    {"/platespin", "Orange plates spin around you. Click on the plates for it to work."},
    {"/kronefling", "Loop flings everyone."},
    {"/gimmetools", "Picks up every tool dropped by a player in the server."},
    {"/givepower (display name)", "Gives the player you wish warning power."},
    {"/oof", "Respawns you and teleports you back to the same position."},
    {"/cmds", "The GUI for this script."},
    {"/antilog", "Prevents the game from logging your chat and screenshots."},
    {"/donttouchme", "Flings everyone that touches you."},
    {"/serverhop", "Hops servers."},
    {"/afk", "Prevents being kicked while AFK."},
    {"/ftao", "For the game (Fling Things and Others)."},
    {"/iy", "Infinite yield admin."},
    {"/emoji", "Enables chatting emojis like Discord (:skull)."},
    {"/f3x", "For (Sword Fights on the Heights Original). Controls orange plates."},
    {"/bypasser", "Bypasses the chat filter."},
    {"/bladeball", "A bladeball script."},
    {"/nonofling", "Prevents other players from flinging you."},
    {"/swordreach", "Explains itself."},
    {"/byebye all", "Flings everyone once."},
    {"/pltiger", "A script for Prison Life."},
    {"/fps", "Boosts FPS."},
    {"/rejoin", "Rejoin the game."},
    {"/warn all", "Warns all players in Mic Up."},
    {"/cmdbar", "A command bar for executing commands without using chat."},
    {"/jobidjoiner", "Join a player by entering game ID and job ID."},
    {"/walkonvoid", "Prevents you from dying by falling into the void."},
    {"/hkill all", "Kills everyone with a sword that does damage."},
    {"/chainedpower", "activates the commands for the gam (Chained 2 players Obby)"},
    {"/nuke", "for the game (Chained 2 players Obby)."},
    {"/bunnyhop all", "for the game (Chained 2 players Obby)."},
    {"/no jumping", "for the game (Chained 2 players Obby)."},
    {"/jail all", "for the game (Chained 2 players Obby)."},
    {"/spawn fog", "for the game (Chained 2 players Obby)."},
    {"/low gravity", "for the game (Chained 2 players Obby)."},
    {"/spam on", "for the game (Chained 2 players Obby)."},
    {"/spam on", "for the game (Chained 2 players Obby)."},
    {"/serverhopmost", "Server hops to the server with the most players."},
    {"/antiheadsit", "self explained."},
    {"/antivoid", "deletes the void."},
    {"/dropkick", "performs a dropkick on nearby players."},
    {"/usercreationcracked", "cracked bypasser"},
    {"/serverhoplow", "Server hops to a low-populated server."},
    {"/walkonair", "adds an invisible baseplate."},
    {"/copy (display name)", "copy the avatar of the target (MIC UP)."},
    {"/copy all", "spam changes to every avatar in the server (MIC UP)."},
    {"/uncopy", "stops the spamming."},
    {"/annoy", "fires the Trick or Treat button many times (MIC UP)."},
    {"/unannoy", "stops the firing."},
    {"/chatbot", "Join Discord, claim points, and enter the key."}
}

-- Create buttons for each command
for _, command in ipairs(commands) do
	local cmdButton = Instance.new("TextButton")
	cmdButton.Size = UDim2.new(1, -10, 0, 30)
	cmdButton.Text = command[1]
	cmdButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	cmdButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	cmdButton.BorderSizePixel = 0
	cmdButton.Parent = scrollFrame

	-- Hover Effect
	cmdButton.MouseEnter:Connect(function()
		cmdButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		descriptionBox.Text = command[2]
		descriptionBox.Visible = true
	end)

	cmdButton.MouseLeave:Connect(function()
		cmdButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		descriptionBox.Visible = false
	end)
end
